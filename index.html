<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Assistant', sans-serif;
            background-color: #f7f9fc;
            color: #333;
        }
        h2, h3 {
            color: #2a9d8f;
            text-align: center;
        }
        table {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        th {
            background-color: #f0f0f0;
            font-weight: 600;
            color: #333;
        }
        td {
            background-color: #fff;
            font-weight: 400;
        }
        select {
            padding: 10px;
            margin-bottom: 20px;
            font-size: 1rem;
            width: 100%;
            max-width: 400px;
            margin: 20px auto;
            display: block;
            border-radius: 8px;
            border: 2px solid #2a9d8f;
            background-color: #fff;
        }
        .important-info {
            color: #e76f51;
            font-weight: 600;
        }
        .our-offer {
            background-color: #6fb98f; /* Couleur de fond pour notre offre */
        }
    </style>
    <title>Comparatif d'Offres</title>
</head>
<body>

    <h2>Comparatif d'Offres</h2>
    <label for="offer-select">Choisissez une offre :</label>
    <select id="offer-select" onchange="changeOffer()">
        <option value="offre1">IAD</option>
        <option value="offre2">SAFTI</option>
        <option value="offre3">BSK</option>
        <option value="offre4">Propriétés Privées</option>
        <option value="offre5">Capifrance</option>
        <option value="offre6">Efficity</option>
        <option value="offre7">Optimhome</option>
        <option value="offre8">MegAgence</option>
        <option value="offre9">Agences</option>
    </select>

    <table id="comparison-table">
        <thead id="offer-header">
            <tr>
                <th>Chiffre d'affaires</th>
                <th>Rétribution Totale</th>
                <th>Pack Mensuel</th>
                <th>Coût Annuel du Pack</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>70 000 € HT</td>
                <td id="retribution" class="important-info"></td>
                <td id="pack"></td>
                <td id="annual-pack" class="important-info"></td>
            </tr>
        </tbody>
    </table>

    <h3>Comparaison avec Notre Offre</h3>
    <table id="our-offer-table" class="our-offer">
        <thead>
            <tr>
                <th>Chiffre d'affaires</th>
                <th>Rétribution Totale</th>
                <th>Pack Mensuel</th>
                <th>Coût Annuel du Pack</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>70 000 € HT</td>
                <td id="our-retribution" class="important-info"></td>
                <td>0 € TTC (Gratuit)</td>
                <td>0 € TTC</td>
            </tr>
        </tbody>
    </table>

    <script>
        const offers = {
            "offre1": {
                "paliers": [
                    { "limit": 35000, "rate": 0.69 },
                    { "limit": Infinity, "rate": 0.878 }
                ],
                "pack": 195
            },
            "offre2": {
                "paliers": [
                    { "limit": 80000, "rate": 0.70 },
                    { "limit": 120000, "rate": 0.80 },
                    { "limit": Infinity, "rate": 0.90 }
                ],
                "pack": 190
            },
            "offre3": {
                "paliers": [
                    { "limit": 59000, "rate": 0.75 },
                    { "limit": 149000, "rate": 0.90 },
                    { "limit": Infinity, "rate": 0.98 }
                ],
                "pack": 150
            },
            "offre4": {
                "paliers": [
                    { "limit": 39000, "rate": 0.70 },
                    { "limit": 59000, "rate": 0.75 },
                    { "limit": 75000, "rate": 0.80 },
                    { "limit": 90000, "rate": 0.85 },
                    { "limit": Infinity, "rate": 0.90 }
                ],
                "pack": 202
            },
            "offre5": {
                "paliers": [
                    { "limit": 39000, "rate": 0.70 },
                    { "limit": 59000, "rate": 0.75 },
                    { "limit": 75000, "rate": 0.80 },
                    { "limit": 90000, "rate": 0.85 },
                    { "limit": Infinity, "rate": 0.90 }
                ],
                "pack": 202
            },
            "offre6": {
                "paliers": [
                    { "limit": 25000, "rate": 0.70 },
                    { "limit": 50000, "rate": 0.78 },
                    { "limit": 150000, "rate": 0.90 },
                    { "limit": Infinity, "rate": 1.00 }
                ],
                "pack": 226
            },
            "offre7": {
                "paliers": [
                    { "limit": 65000, "rate": 0.70 },
                    { "limit": 200000, "rate": 0.80 },
                    { "limit": Infinity, "rate": 1.00 }
                ],
                "pack": 334
            },
            "offre8": {
                "paliers": [
                    { "limit": 29000, "rate": 0.70 },
                    { "limit": 49000, "rate": 0.75 },
                    { "limit": 69000, "rate": 0.80 },
                    { "limit": 89000, "rate": 0.85 },
                    { "limit": 149000, "rate": 0.90 },
                    { "limit": 189000, "rate": 0.95 },
                    { "limit": Infinity, "rate": 0.99 }
                ],
                "pack": 80
            },
            "offre9": {
                "paliers": [
                    { "limit": Infinity, "rate": 0.45 }
                ],
                "pack": 0 // Pas de pack pour cette offre
            }
        };

        function calculatePalier(paliers, ca) {
            let totalRetribution = 0;
            let remainingCA = ca;

            for (let palier of paliers) {
                if (remainingCA > 0) {
                    const palierCA = Math.min(remainingCA, palier.limit);
                    totalRetribution += palierCA * palier.rate;
                    remainingCA -= palierCA;
                }
            }
            return totalRetribution;
        }

        function changeOffer() {
            const selectedOffer = document.getElementById("offer-select").value;
            const offer = offers[selectedOffer];
            const ca = 70000;

            // Calcul de la rétribution
            const retribution = calculatePalier(offer.paliers, ca);
            const annualPack = offer.pack * 12;

            // Met à jour les éléments avec les résultats
            document.getElementById("retribution").textContent = retribution.toFixed(2) + " € HT";
            document.getElementById("pack").textContent = offer.pack + " € TTC";
            document.getElementById("annual-pack").textContent = annualPack + " € TTC";

            // Calcul et affiche les résultats pour notre offre
            const ourRetribution = calculateOurOffer(ca);
            document.getElementById("our-retribution").textContent = ourRetribution.toFixed(2) + " € HT";
        }

        function calculateOurOffer(ca) {
            const paliers = [
                { limit: 35000, rate: 0.75 },
                { limit: 70000, rate: 0.85 },
                { limit: Infinity, rate: 1.00 }
            ];
            return calculatePalier(paliers, ca);
        }

        // Initialiser l'affichage avec la première offre sélectionnée
        window.onload = changeOffer;
    </script>

</body>
</html>
